<!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="author" content="Untree.co" />
    <link rel="shortcut icon" href="/favicon.png" />

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <!-- Bootstrap CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <!-- Font Awesome (latest stable) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Cookie&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Css Styles -->
    <link rel="stylesheet" href="/css3/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/elegant-icons.css" type="text/css" />
    <link rel="stylesheet" href="/css3/jquery-ui.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/magnific-popup.css" type="text/css" />
    <link rel="stylesheet" href="/css3/owl.carousel.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/slicknav.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/style.css" type="text/css" />

    <link href="/css/tiny-slider.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/tempusStyle.css" />
    <link rel="stylesheet" href="/css3/productDetailsStyle.css" />
    <title>Tempus</title>
  </head>

  <body>
    <!--HEADER-->
    <%- include('../../views/partials/user/header')%>
    <!--HEADER-->
    <!-- Breadcrumb Begin -->
    <div class="breadcrumb-option">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="breadcrumb__links">
              <a href="/"><i class="fa fa-home"></i> Home</a>
              <a href="/collections">Collections </a>
              <span><%=product.productName%></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Breadcrumb End -->

    <!-- Product Details Section Begin -->
    <section class="product-details spad">
      <div class="container">
        <div class="row">
          <div class="col-lg-6">
            <div class="product__details__pic">
              <div
                class="product__details__pic__left product__thumb nice-scroll"
              >
                <a class="pt active" href="#product-1">
                  <img src="<%=variant.variantImages[0]%>" alt="" />
                </a>
                <a class="pt" href="#product-2">
                  <img src="<%=variant.variantImages[1]%>" alt="" />
                </a>
                <a class="pt" href="#product-3">
                  <img src="<%=variant.variantImages[2]%>" alt="" />
                </a>
                <a class="pt" href="#product-4">
                  <img src="<%=variant.variantImages[3]%>" alt="" />
                </a>
              </div>
              <div class="product__details__slider__content">
                <div class="product__details__pic__slider owl-carousel">
                  <div class="zoom-container">
                    <img
                      data-hash="product-1"
                      class="product__big__img zoomImg"
                      src="<%=variant.variantImages[0]%>"
                      alt=""
                    />
                  </div>
                  <div class="zoom-container">
                    <img
                      data-hash="product-2"
                      class="product__big__img zoomImg"
                      src="<%=variant.variantImages[1]%>"
                      alt=""
                    />
                  </div>
                  <div class="zoom-container">
                    <img
                      data-hash="product-3"
                      class="product__big__img zoomImg"
                      src="<%=variant.variantImages[2]%>"
                      alt=""
                    />
                  </div>
                  <div class="zoom-container">
                    <img
                      data-hash="product-4"
                      class="product__big__img zoomImg"
                      src="<%=variant.variantImages[3]%>"
                      alt=""
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="product__details__text">
              <h3>
                <%=product.productName%>
                <span
                  >Brand:
                  <%=product.brand%></span
                >
              </h3>
              <div class="rating">
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <span>( 138 reviews )</span>
              </div>
              <%if(variant.offerPrice==variant.actualPrice){%>
              <div class="product__details__price">
                ₹<%=variant.offerPrice%> <span></span>
              </div>

              <%}else{%>

              <div class="product__details__price">
                ₹<%=variant.offerPrice%> <span>₹<%=variant.actualPrice%></span>
              </div>
              <%}%>
              <p><%=product.description%></p>
              <div class="product__details__button">
                <div class="quantity">
                  <span>Quantity:</span>
                  <div class="pro-qty bg-white">
                    <input
                      type="number"
                      value="1"
                      id="quantity"
                      name="quantity"
                    />
                  </div>
                </div>
                <%if(checkQuantity <= 0){%>
                <a
                  href="#"
                  class="cart-btn text-decoration-none"
                  id="addToCartButton"
                  style="
                    pointer-events: none;
                    cursor: default;
                    background-color: rgb(250, 112, 112);
                  "
                  ><i class="fa-solid fa-bag-shopping"></i> Add to cart</a
                >
                <%}else{%>
                <a
                  href="#"
                  class="cart-btn text-decoration-none"
                  id="addToCartButton"
                  data-product-id="<%=product._id%>"
                  data-variant-id="<%=variant._id%>"
                  data-variant-price="<%=variant.offerPrice%>"
                  disabled
                  ><i class="fa-solid fa-bag-shopping"></i> Add to cart</a
                >
                <%}%>
                <ul>
                  <li>
                    <a href="#" id="wishlistBtn">
                      <i
                        class="fa-regular fa-heart fa-2x"
                        id="wishlistIcon"
                      ></i>
                    </a>

                    <!-- Toasts -->
                    <div
                      class="toast-container position-fixed bottom-0 end-0 p-3"
                    >
                      <!-- Added Toast -->
                      <div
                        id="wishlistAddedToast"
                        class="toast align-items-center text-bg-success border-0"
                        role="alert"
                      >
                        <div class="d-flex">
                          <div class="toast-body">✅ Added to wishlist!</div>
                          <button
                            type="button"
                            class="btn-close btn-close-white me-2 m-auto"
                            data-bs-dismiss="toast"
                          ></button>
                        </div>
                      </div>

                      <!-- Removed Toast -->
                      <div
                        id="wishlistRemovedToast"
                        class="toast align-items-center text-bg-danger border-0"
                        role="alert"
                      >
                        <div class="d-flex">
                          <div class="toast-body">
                            ❌ Removed from wishlist!
                          </div>
                          <button
                            type="button"
                            class="btn-close btn-close-white me-2 m-auto"
                            data-bs-dismiss="toast"
                          ></button>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="product__details__widget">
                <ul>
                  <li>
                    <span>Availability:</span>
                    <div class="stock__checkbox">
                      <label for="stockin">
                        <% if(checkQuantity > 10) { %> In Stock <% } else
                        if(checkQuantity > 0) { %> ⚠️ Few Items Left
                        <% } else { %>
                        ❌ Out of Stock
                        <% } %>
                      </label>
                    </div>
                  </li>
                  <li>
                    <span>Available Variants:</span>
                    <div class="variant-thumbnails">
                      <% if (product.variants) { %> <%
                      product.variants.forEach((variant) => { %>
                      <a
                        href="/collections/<%= product._id %>?variantId=<%= variant._id %>"
                      >
                        <img
                          src="<%= variant.variantImages[0] %>"
                          alt="variant"
                        />
                      </a>
                      <% }) %>
                      <% } %>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="product__details__tab">
              <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    data-toggle="tab"
                    href="#tabs-1"
                    role="tab"
                    >Description</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    data-toggle="tab"
                    href="#tabs-2"
                    role="tab"
                    >Specification</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    data-toggle="tab"
                    href="#tabs-3"
                    role="tab"
                    >Reviews ( 2 )</a
                  >
                </li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane text-center" id="tabs-1" role="tabpanel">
                  <p><%=product.description%></p>
                </div>
                <div
                  class="tab-pane active text-center"
                  id="tabs-2"
                  role="tabpanel"
                >
                  <p>Strap Material: <%=variant.strapMaterial%></p>
                  <p>Strap Color: <%=variant.strapColor%></p>
                  <p>Dial Color: <%=variant.dialColor%></p>
                  <p>Case Size: <%=variant.caseSize%></p>
                  <p>Movement Type: <%=variant.movementType%></p>
                  <p>Case Material: <%=variant.caseMaterial%></p>
                </div>
                <div class="tab-pane" id="tabs-3" role="tabpanel">
                  <h6>Reviews ( 2 )</h6>
                  <p>
                    Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut
                    odit aut loret fugit, sed quia consequuntur magni dolores
                    eos qui ratione voluptatem sequi nesciunt loret. Neque porro
                    lorem quisquam est, qui dolorem ipsum quia dolor si. Nemo
                    enim ipsam voluptatem quia voluptas sit aspernatur aut odit
                    aut loret fugit, sed quia ipsu consequuntur magni dolores
                    eos qui ratione voluptatem sequi nesciunt. Nulla consequat
                    massa quis enim.
                  </p>
                  <p>
                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
                    Aenean commodo ligula eget dolor. Aenean massa. Cum sociis
                    natoque penatibus et magnis dis parturient montes, nascetur
                    ridiculus mus. Donec quam felis, ultricies nec, pellentesque
                    eu, pretium quis, sem.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="text-center">
            <h5 class="h5 p-3">RELATED PRODUCTS</h5>
          </div>
          <div class="row g-4">
            <% latestProducts.forEach(product => { %>
            <div class="col-md-3 col-sm-6">
              <a
                href="/collections/<%= product._id %>?variantId=<%= product.variants[0]._id %>"
                class="text-decoration-none text-dark"
              >
                <div class="product-card">
                  <div class="product-image">
                    <img
                      src="<%= product.variants[0].variantImages[0] %>"
                      alt="<%= product.productName %>"
                    />
                    <button class="wishlist-btn">
                      <i class="fa fa-heart"></i>
                    </button>
                  </div>
                  <div class="product-details2">
                    <h4><%= product.productName %></h4>

                    <% let prices = product.variants.map(v => v.offerPrice ||
                    v.price).filter(p => p); let minPrice = Math.min(...prices);
                    let maxPrice = Math.max(...prices); %>

                    <p class="product-price">
                      Rs. <%= minPrice %> <% if(minPrice !== maxPrice) { %> -
                      Rs. <%= maxPrice %> <% } %>
                    </p>
                  </div>
                </div>
              </a>
            </div>

            <% }) %>
          </div>
        </div>
      </div>
    </section>
    <!-- Product Details Section End -->

    <!--FOOTER-->
    <%- include('../../views/partials/user/footer')%>
    <!--FOOTER-->
    <!-- Js Plugins -->
    <script src="/js3/jquery-3.3.1.min.js"></script>
    <script src="/js3/bootstrap.min.js"></script>
    <script src="/js3/jquery.magnific-popup.min.js"></script>
    <script src="/js3/jquery-ui.min.js"></script>
    <script src="/js3/mixitup.min.js"></script>
    <script src="/js3/jquery.countdown.min.js"></script>
    <script src="/js3/jquery.slicknav.js"></script>
    <script src="/js3/owl.carousel.min.js"></script>
    <script src="/js3/jquery.nicescroll.min.js"></script>
    <script src="/js3/main.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/tiny-slider.js"></script>
    <script src="/js/custom.js"></script>
    <script src="/js/templateJS.js"></script>
    <script src="/js/addToCartBtn.js"></script>
    <script src="/js3/picZoom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      const success_msg =
        "<%= success_msg && success_msg.length > 0 ? success_msg[0] : '' %>";
      const error_msg =
        "<%= error_msg && error_msg.length > 0 ? error_msg[0] : '' %>";

      if (success_msg && success_msg.length > 0) {
        Swal.fire({
          icon: 'success',
          title: 'Success',
          text: success_msg,
          confirmButtonColor: '#3085d6',
        });
      }

      if (error_msg && error_msg.length > 0) {
        Swal.fire({
          icon: 'error',
          title: 'Error',
          text: error_msg,
          confirmButtonColor: '#d33',
        });
      }
    </script>
  </body>
</html>
