<!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="author" content="Untree.co" />
    <link rel="shortcut icon" href="favicon.png" />

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <!-- Font Awesome (latest stable) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Cookie&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Css Styles -->
    <link rel="stylesheet" href="/css3/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/elegant-icons.css" type="text/css" />
    <link rel="stylesheet" href="/css3/jquery-ui.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/magnific-popup.css" type="text/css" />
    <link rel="stylesheet" href="/css3/owl.carousel.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/slicknav.min.css" type="text/css" />
    <link rel="stylesheet" href="/css3/style.css" type="text/css" />
    <link rel="stylesheet" href="/css2/referral.css" />
    <link href="css/tiny-slider.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/tempusStyle.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <title>Tempus</title>
  </head>

  <body>
    <!--HEADER-->
    <%- include('../../views/partials/user/header')%>
    <!--HEADER-->

    <main class="bg-light pb-5">
      <div class="container">
        <!-- Hero -->
        <section class="text-center mb-5">
          <div
            class="d-inline-flex align-items-center gap-2 px-3 py-2 ref-chip my-5"
          >
            <i class="bi bi-gem"></i>
            <span>Refer & Earn</span>
          </div>
          <h1 class="fw-bold display-5 hero-title">
            Share the love. Earn rewards.
          </h1>
          <h4 class="fw-bold hero-title my-3 text-dark">
            Refer now & earn upto ₹1000
          </h4>
          <p class="text-secondary lead mx-auto" style="max-width: 760px">
            Invite friends and get rewards when they join. Your unique link
            tracks everything—share it anywhere.
          </p>
        </section>

        <!-- Referral Card -->
        <div class="d-flex align-items-center justify-content-center">
          <section class="glass p-4 p-md-5 mb-4">
            <div class="g-4 align-items-center">
              <div>
                <div class="d-flex align-items-center gap-3 mb-3">
                  <div class="icon-circle">
                    <i class="bi bi-link-45deg fs-4"></i>
                  </div>
                  <div>
                    <div class="text-uppercase small text-secondary">
                      Your referral code
                    </div>
                    <div id="refLink" class="fw-semibold text-break">
                      <%=userInfo.refferalCode%>
                    </div>
                  </div>
                </div>
                <div class="input-group card-smooth">
                  <input
                    id="refInput"
                    type="text"
                    class="form-control bg-transparent border-0"
                    value="<%=userInfo.refferalCode%>"
                    readonly
                    aria-label="Referral link"
                  />
                  <button id="copyBtn" class="btn btn-brand">Copy</button>
                </div>
                <div id="copyNote" class="form-text mt-2 footer-note">
                  Tip: Share it via WhatsApp/Facebook/Email.
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- CTA -->
        <section class="text-center mt-5">
          <button id="inviteMore" class="btn btn-brand btn-lg px-4">
            <i class="bi bi-share me-2"></i>Invite more friends
          </button>
          <p class="footer-note mt-2">
            Every successful joins earns you rewards.
          </p>
        </section>
      </div>
    </main>

    <!-- Toasts -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080">
      <div
        id="mainToast"
        class="toast align-items-center text-bg-light border-0"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="d-flex">
          <div class="toast-body" id="toastMsg">Copied!</div>
          <button
            type="button"
            class="btn-close me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>

    <!--FOOTER-->
    <%- include('../../views/partials/user/footer')%>
    <!--FOOTER-->
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/tiny-slider.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/templateJS.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const refInput = document.getElementById('refInput');
      const copyBtn = document.getElementById('copyBtn');
      const toastEl = document.getElementById('mainToast');
      const toastMsg = document.getElementById('toastMsg');

      function showToast(message) {
        toastMsg.textContent = message;
        const toast = new bootstrap.Toast(toastEl, { delay: 1700 });
        toast.show();
      }

      copyBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(refInput.value);
          showToast('Referral code copied!');
        } catch {
          refInput.select();
          document.execCommand('copy');
          showToast('Link copied!');
        }
      });
    </script>
    <script>
      const success_msg =
        "<%= success_msg && success_msg.length > 0 ? success_msg[0] : '' %>";
      const error_msg =
        "<%= error_msg && error_msg.length > 0 ? error_msg[0] : '' %>";

      if (success_msg && success_msg.length > 0) {
        Swal.fire({
          icon: 'success',
          title: 'Success',
          text: success_msg,
          confirmButtonColor: '#3085d6',
        });
      }

      if (error_msg && error_msg.length > 0) {
        Swal.fire({
          icon: 'error',
          title: 'Error',
          text: error_msg,
          confirmButtonColor: '#d33',
        });
      }
    </script>
  </body>
</html>
